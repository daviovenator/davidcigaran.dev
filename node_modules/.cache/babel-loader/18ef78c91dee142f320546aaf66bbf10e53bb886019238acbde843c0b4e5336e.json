{"ast":null,"code":"import React,{createContext,useState,useContext,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const LanguageContext=/*#__PURE__*/createContext();export const useLanguage=()=>useContext(LanguageContext);export const LanguageProvider=_ref=>{let{children}=_ref;const[language,setLanguage]=useState('es');const[translations,setTranslations]=useState({});// Cargar traducciones\nuseEffect(()=>{const loadTranslations=async()=>{try{const response=await import(\"../locales/\".concat(language,\".json\"));setTranslations(response.default);// Guardar preferencia\nlocalStorage.setItem('preferredLanguage',language);document.documentElement.lang=language;}catch(error){console.error('Error loading translations:',error);// Cargar español como fallback\ntry{const fallback=await import(\"../locales/es.json\");setTranslations(fallback.default);}catch(e){console.error('Failed to load fallback translations:',e);}}};loadTranslations();},[language]);// Inicializar con idioma guardado o del navegador\nuseEffect(()=>{const savedLanguage=localStorage.getItem('preferredLanguage');const browserLang=navigator.language.split('-')[0];const supportedLangs=['es','en','fr','de','it','por','chi','ru'];if(savedLanguage&&supportedLangs.includes(savedLanguage)){setLanguage(savedLanguage);}else if(supportedLangs.includes(browserLang)){setLanguage(browserLang);}},[]);const t=path=>{const keys=path.split('.');let value=translations;for(const key of keys){var _value;value=(_value=value)===null||_value===void 0?void 0:_value[key];if(value===undefined){console.warn(\"Translation missing for: \".concat(path));return path.split('.').pop();// Devolver última parte como fallback\n}}return value;};const changeLanguage=newLang=>{setLanguage(newLang);};return/*#__PURE__*/_jsx(LanguageContext.Provider,{value:{language,t,changeLanguage,translations},children:children});};","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","jsx","_jsx","LanguageContext","useLanguage","LanguageProvider","_ref","children","language","setLanguage","translations","setTranslations","loadTranslations","response","concat","default","localStorage","setItem","document","documentElement","lang","error","console","fallback","e","savedLanguage","getItem","browserLang","navigator","split","supportedLangs","includes","t","path","keys","value","key","_value","undefined","warn","pop","changeLanguage","newLang","Provider"],"sources":["/home/deus/david/src/context/LanguageContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\n\nconst LanguageContext = createContext();\n\nexport const useLanguage = () => useContext(LanguageContext);\n\nexport const LanguageProvider = ({ children }) => {\n  const [language, setLanguage] = useState('es');\n  const [translations, setTranslations] = useState({});\n\n  // Cargar traducciones\n  useEffect(() => {\n    const loadTranslations = async () => {\n      try {\n        const response = await import(`../locales/${language}.json`);\n        setTranslations(response.default);\n        \n        // Guardar preferencia\n        localStorage.setItem('preferredLanguage', language);\n        document.documentElement.lang = language;\n      } catch (error) {\n        console.error('Error loading translations:', error);\n        // Cargar español como fallback\n        try {\n          const fallback = await import(`../locales/es.json`);\n          setTranslations(fallback.default);\n        } catch (e) {\n          console.error('Failed to load fallback translations:', e);\n        }\n      }\n    };\n\n    loadTranslations();\n  }, [language]);\n\n  // Inicializar con idioma guardado o del navegador\n  useEffect(() => {\n    const savedLanguage = localStorage.getItem('preferredLanguage');\n    const browserLang = navigator.language.split('-')[0];\n    const supportedLangs = ['es', 'en', 'fr', 'de', 'it', 'por', 'chi', 'ru'];\n    \n    if (savedLanguage && supportedLangs.includes(savedLanguage)) {\n      setLanguage(savedLanguage);\n    } else if (supportedLangs.includes(browserLang)) {\n      setLanguage(browserLang);\n    }\n  }, []);\n\n  const t = (path) => {\n    const keys = path.split('.');\n    let value = translations;\n    \n    for (const key of keys) {\n      value = value?.[key];\n      if (value === undefined) {\n        console.warn(`Translation missing for: ${path}`);\n        return path.split('.').pop(); // Devolver última parte como fallback\n      }\n    }\n    \n    return value;\n  };\n\n  const changeLanguage = (newLang) => {\n    setLanguage(newLang);\n  };\n\n  return (\n    <LanguageContext.Provider value={{ language, t, changeLanguage, translations }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}